# ××“×¨×™×š ×‘×“×™×§×•×ª ×‘-Swagger UI - ×©×œ×‘ ×©×œ×‘

## ×¤×ª×™×—×ª Swagger UI

1. ×¤×ª×— ×‘×“×¤×“×¤×Ÿ: `http://127.0.0.1:8000/docs`
2. ×ª×¨××” ××ª ×›×œ ×”-endpoints ×¢× ×ª×™×¢×•×“ ××œ×

---

## ×‘×“×™×§×” 1: GET /health âœ…

**××™×š ×œ×‘×“×•×§:**
1. ×œ×—×¥ ×¢×œ `GET /health`
2. ×œ×—×¥ ×¢×œ "Try it out"
3. ×œ×—×¥ ×¢×œ "Execute"
4. âœ… ×ª×•×¦××” ×¦×¤×•×™×”: `200 OK` ×¢× `"status": "healthy"`

---

## ×‘×“×™×§×” 2: GET /cabins âœ…

**××™×š ×œ×‘×“×•×§:**
1. ×œ×—×¥ ×¢×œ `GET /cabins`
2. ×œ×—×¥ ×¢×œ "Try it out"
3. ×œ×—×¥ ×¢×œ "Execute"
4. âœ… ×ª×•×¦××” ×¦×¤×•×™×”: ×¨×©×™××ª 3 ×¦×™××¨×™×

**ğŸ“ ×”×¢×¨×” ×—×©×•×‘×”:** ×©××•×¨ ××ª ×”-`cabin_id` ××”×ª×’×•×‘×”! ×ª×¦×˜×¨×š ××•×ª×• ×œ×‘×“×™×§×•×ª ×”×‘××•×ª.

**×“×•×’××” ×œ-cabin_id:**
- `ZB01` (××”×¦×™××¨ ×©×œ ×™×•×œ×™)
- `ZB02` (××”×¦×™××¨ ×©×œ ×××™)
- `ZB03` (××”×¦×™××¨ ×©×œ ××•×¨×Ÿ)

××• UUID ××”×ª×’×•×‘×”, ×œ××©×œ: `c5b7e7bd-2790-514a-97ef-6803e71579b2`

---

## ×‘×“×™×§×” 3: POST /availability âš ï¸

### ××™×š ×œ××œ× × ×›×•×Ÿ:

1. ×œ×—×¥ ×¢×œ `POST /availability`
2. ×œ×—×¥ ×¢×œ "Try it out"
3. ××œ× ××ª ×”-JSON (×”×¢×ª×§ ××ª ×–×” ×‘×“×™×•×§):

```json
{
  "check_in": "2026-02-15 15:00",
  "check_out": "2026-02-17 11:00",
  "adults": 2,
  "kids": null,
  "area": null,
  "features": null
}
```

**ğŸ“ ×¤×•×¨××˜ ×ª××¨×™×›×™× ×—×©×•×‘:**
- âœ… × ×›×•×Ÿ: `"2026-02-15 15:00"` (YYYY-MM-DD HH:MM)
- âœ… × ×›×•×Ÿ: `"2026-02-15"` (YYYY-MM-DD)
- âŒ ×©×’×•×™: `"01/03/26"` (×œ× ×ª×§×™×Ÿ!)
- âŒ ×©×’×•×™: `"06/06/26g"` (×™×© "g" ×‘×¡×•×£!)

**×¤×¨××˜×¨×™×:**
- `check_in`: ×ª××¨×™×š ×›× ×™×¡×” ×‘×¤×•×¨××˜ `YYYY-MM-DD HH:MM` ××• `YYYY-MM-DD`
- `check_out`: ×ª××¨×™×š ×™×¦×™××” ×‘×¤×•×¨××˜ `YYYY-MM-DD HH:MM` ××• `YYYY-MM-DD`
- `adults`: ××¡×¤×¨ ××‘×•×’×¨×™× (××¡×¤×¨, ×œ× ××—×¨×•×–×ª!)
- `kids`: ××¡×¤×¨ ×™×œ×“×™× (××¡×¤×¨ ××• `null`)
- `area`: ××–×•×¨ (××—×¨×•×–×ª ××• `null`)
- `features`: ×¨×©×™××ª features ××•×¤×¨×“×ª ×‘×¤×¡×™×§×™× (××—×¨×•×–×ª ××• `null`), ×œ××©×œ: `"jacuzzi,pool,bbq"`

4. ×œ×—×¥ ×¢×œ "Execute"
5. âœ… ×ª×•×¦××” ×¦×¤×•×™×”: `200 OK` ×¢× ×¨×©×™××ª ×¦×™××¨×™× ×–××™× ×™×

**×“×•×’××” ×œ×ª×’×•×‘×”:**
```json
[
  {
    "cabin_id": "ZB01",
    "name": "×”×¦×™××¨ ×©×œ ×™×•×œ×™",
    "area": "×’×œ×™×œ ××¢×¨×‘×™",
    "nights": 2,
    "regular_nights": 1,
    "weekend_nights": 1,
    "total_price": 1500.0,
    "max_adults": 2,
    "max_kids": 2,
    "features": "jacuzzi,pool,accessible,bbq,pet_friendly"
  }
]
```

---

## ×‘×“×™×§×” 4: POST /quote âš ï¸

### ××™×š ×œ××œ× × ×›×•×Ÿ:

1. **×§×•×“× ×›×œ, ×§×‘×œ cabin_id:**
   - ×”×¨×¥ `GET /cabins` (×‘×“×™×§×” 2)
   - ×”×¢×ª×§ ××ª ×”-`cabin_id` ××”×ª×’×•×‘×” (×œ××©×œ: `ZB01` ××• UUID)

2. ×œ×—×¥ ×¢×œ `POST /quote`
3. ×œ×—×¥ ×¢×œ "Try it out"
4. ××œ× ××ª ×”-JSON (×”×¢×ª×§ ××ª ×–×” ×‘×“×™×•×§):

```json
{
  "cabin_id": "ZB01",
  "check_in": "2026-02-15 15:00",
  "check_out": "2026-02-17 11:00",
  "adults": 2,
  "kids": null,
  "addons": [
    {
      "name": "××¡××’' ×œ×—×“×¨",
      "price": 200
    },
    {
      "name": "××¨×•×—×ª ×©×£",
      "price": 300
    }
  ]
}
```

**ğŸ“ ×—×©×•×‘:**
- `cabin_id`: **×—×™×™×‘ ×œ×”×™×•×ª ×ª×§×™×Ÿ!** ×”×©×ª××© ×‘-`ZB01`, `ZB02`, ××• `ZB03` (××• UUID ××”×ª×’×•×‘×” ×©×œ `/cabins`)
- `check_in` ×•-`check_out`: **×¤×•×¨××˜ × ×›×•×Ÿ!** `YYYY-MM-DD HH:MM` ××• `YYYY-MM-DD`
- `adults`: ××¡×¤×¨ (×œ× ××—×¨×•×–×ª!)
- `kids`: ××¡×¤×¨ ××• `null` (×œ× ××—×¨×•×–×ª!)
- `addons`: ×¨×©×™××” ×©×œ ××•×‘×™×™×§×˜×™×, ×›×œ ××—×“ ×¢× `name` ×•-`price`

**×× ×™×© ×©×’×™××ª 404:**
- `cabin_id` ×œ× × ×›×•×Ÿ
- ×¤×ª×¨×•×Ÿ: ×”×¨×¥ `GET /cabins` ×•×§×— `cabin_id` ××”×ª×’×•×‘×”

**×× ×™×© ×©×’×™××ª 422:**
- ×‘×“×•×§ ××ª ×”×¤×•×¨××˜ ×©×œ ×”×ª××¨×™×›×™×
- ×‘×“×•×§ ×©-`adults` ×•-`kids` ×”× ××¡×¤×¨×™× (×œ× ××—×¨×•×–×•×ª)
- ×‘×“×•×§ ×©-`addons` ×”×•× ×¨×©×™××” ×ª×§×™× ×”

5. ×œ×—×¥ ×¢×œ "Execute"
6. âœ… ×ª×•×¦××” ×¦×¤×•×™×”: `200 OK` ×¢× breakdown ××¤×•×¨×˜

**×“×•×’××” ×œ×ª×’×•×‘×”:**
```json
{
  "cabin_id": "ZB01",
  "cabin_name": "×”×¦×™××¨ ×©×œ ×™×•×œ×™",
  "check_in": "2026-02-15 15:00",
  "check_out": "2026-02-17 11:00",
  "nights": 2,
  "regular_nights": 1,
  "weekend_nights": 1,
  "holiday_nights": 0,
  "high_season_nights": 0,
  "base_total": 1500.0,
  "weekend_surcharge": 300.0,
  "holiday_surcharge": 0.0,
  "high_season_surcharge": 0.0,
  "addons_total": 500.0,
  "addons": [
    {"name": "××¡××’' ×œ×—×“×¨", "price": 200.0},
    {"name": "××¨×•×—×ª ×©×£", "price": 300.0}
  ],
  "subtotal": 2000.0,
  "discount": {
    "percent": 0.0,
    "amount": 0.0,
    "reason": null
  },
  "total": 2000.0,
  "breakdown": [
    {
      "date": "2026-02-15",
      "is_weekend": true,
      "is_holiday": false,
      "is_high_season": false,
      "price": 900.0
    },
    {
      "date": "2026-02-16",
      "is_weekend": false,
      "is_holiday": false,
      "is_high_season": false,
      "price": 600.0
    }
  ]
}
```

---

## ×‘×“×™×§×” 5: POST /book âš ï¸

**âš ï¸ ××–×”×¨×”:** ×–×” ×™×•×¦×¨ ×”×–×× ×” ×××™×ª×™×ª ×‘-DB ×•×‘×™×•××Ÿ!

**××™×š ×œ××œ× × ×›×•×Ÿ:**

1. ×œ×—×¥ ×¢×œ `POST /book`
2. ×œ×—×¥ ×¢×œ "Try it out"
3. ××œ× ××ª ×”-JSON:

```json
{
  "cabin_id": "ZB01",
  "check_in": "2026-02-20 15:00",
  "check_out": "2026-02-22 11:00",
  "customer": "×™×©×¨××œ ×™×©×¨××œ×™",
  "email": "test@example.com",
  "phone": "050-1234567",
  "adults": 2,
  "kids": null,
  "addons": [
    {
      "name": "××¡××’' ×œ×—×“×¨",
      "price": 200
    }
  ]
}
```

**ğŸ“ ×—×©×•×‘:**
- `cabin_id`: ×—×™×™×‘ ×œ×”×™×•×ª ×ª×§×™×Ÿ (ZB01, ZB02, ××• ZB03)
- `check_in` ×•-`check_out`: ×¤×•×¨××˜ × ×›×•×Ÿ!
- `customer`: ×©× ×”×œ×§×•×— (×—×•×‘×”!)
- `email`: ××™××™×™×œ (××•×¤×¦×™×•× ×œ×™)
- `phone`: ×˜×œ×¤×•×Ÿ (××•×¤×¦×™×•× ×œ×™)
- `adults`: ××¡×¤×¨ (×œ× ××—×¨×•×–×ª!)
- `kids`: ××¡×¤×¨ ××• `null`
- `addons`: ×¨×©×™××” ×ª×§×™× ×”

4. ×œ×—×¥ ×¢×œ "Execute"
5. âœ… ×ª×•×¦××” ×¦×¤×•×™×”: `200 OK` ×¢× ×¤×¨×˜×™ ×”×”×–×× ×”

---

## ×‘×“×™×§×” 6: GET /admin/bookings

**××™×š ×œ×‘×“×•×§:**
1. ×œ×—×¥ ×¢×œ `GET /admin/bookings`
2. ×œ×—×¥ ×¢×œ "Try it out"
3. (××•×¤×¦×™×•× ×œ×™) ××œ× ×¤×¨××˜×¨×™×:
   - `status`: "confirmed" (××•×¤×¦×™×•× ×œ×™)
   - `limit`: 100
   - `offset`: 0
4. ×œ×—×¥ ×¢×œ "Execute"
5. âœ… ×ª×•×¦××” ×¦×¤×•×™×”: `200 OK` ×¢× ×¨×©×™××ª ×”×–×× ×•×ª

---

## ×‘×“×™×§×” 7: GET /admin/audit

**××™×š ×œ×‘×“×•×§:**
1. ×œ×—×¥ ×¢×œ `GET /admin/audit`
2. ×œ×—×¥ ×¢×œ "Try it out"
3. (××•×¤×¦×™×•× ×œ×™) ××œ× ×¤×¨××˜×¨×™×:
   - `table_name`: "bookings" (××•×¤×¦×™×•× ×œ×™)
   - `action`: "INSERT" (××•×¤×¦×™×•× ×œ×™)
   - `limit`: 10
   - `offset`: 0
4. ×œ×—×¥ ×¢×œ "Execute"
5. âœ… ×ª×•×¦××” ×¦×¤×•×™×”: `200 OK` ×¢× ×¨×©×™××ª ×œ×•×’×™×

---

## ×˜×™×¤×™× ×—×©×•×‘×™×

### 1. ×¤×•×¨××˜ ×ª××¨×™×›×™×
- âœ… × ×›×•×Ÿ: `"2026-02-15 15:00"`
- âœ… × ×›×•×Ÿ: `"2026-02-15"`
- âŒ ×©×’×•×™: `"01/03/26"`
- âŒ ×©×’×•×™: `"06/06/26g"`

### 2. ××¡×¤×¨×™× vs ××—×¨×•×–×•×ª
- âœ… × ×›×•×Ÿ: `"adults": 2` (××¡×¤×¨)
- âŒ ×©×’×•×™: `"adults": "2"` (××—×¨×•×–×ª)

### 3. null vs ××—×¨×•×–×ª ×¨×™×§×”
- âœ… × ×›×•×Ÿ: `"kids": null`
- âŒ ×©×’×•×™: `"kids": ""`

### 4. cabin_id
- ×ª××™×“ ×§×‘×œ ××ª ×”-`cabin_id` ××”×ª×’×•×‘×” ×©×œ `GET /cabins`
- ××¤×©×¨ ×œ×”×©×ª××© ×‘-`ZB01`, `ZB02`, `ZB03` (×× ×”× ×§×™×™××™×)
- ××• UUID ××”×ª×’×•×‘×”

### 5. ×ª×•×¡×¤×•×ª (addons)
- âœ… × ×›×•×Ÿ: `[{"name": "××¡××’' ×œ×—×“×¨", "price": 200}]`
- âŒ ×©×’×•×™: `["××¡××’' ×œ×—×“×¨"]`

---

## ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª × ×¤×•×¦×•×ª

### ×©×’×™××ª 400 ×‘-/availability
- **×¡×™×‘×”:** ×¤×•×¨××˜ ×ª××¨×™×š ×œ× ×ª×§×™×Ÿ
- **×¤×ª×¨×•×Ÿ:** ×”×©×ª××© ×‘-`"YYYY-MM-DD HH:MM"` ××• `"YYYY-MM-DD"`

### ×©×’×™××ª 404 ×‘-/quote
- **×¡×™×‘×”:** `cabin_id` ×œ× × ×›×•×Ÿ
- **×¤×ª×¨×•×Ÿ:** ×”×¨×¥ `GET /cabins` ×•×§×— `cabin_id` ××”×ª×’×•×‘×”

### ×©×’×™××ª 422 ×‘-/quote
- **×¡×™×‘×”:** ×¤×•×¨××˜ ×œ× ×ª×§×™×Ÿ ×©×œ ×”×¤×¨××˜×¨×™×
- **×¤×ª×¨×•×Ÿ:** ×‘×“×•×§ ×©:
  - ×ª××¨×™×›×™× ×‘×¤×•×¨××˜ × ×›×•×Ÿ
  - `adults` ×•-`kids` ×”× ××¡×¤×¨×™× (×œ× ××—×¨×•×–×•×ª)
  - `addons` ×”×•× ×¨×©×™××” ×ª×§×™× ×”

### ×©×’×™××ª 500 ×‘-/admin/audit
- **×¡×™×‘×”:** ×¢××•×“×•×ª ×—×¡×¨×•×ª ×‘×˜×‘×œ×”
- **×¤×ª×¨×•×Ÿ:** ×”×¨×¥ ××ª ×”-migration ××• ×¦×•×¨ ××ª ×”×˜×‘×œ××•×ª ××—×“×©

---

## ×¡×“×¨ ××•××œ×¥ ×œ×‘×“×™×§×”

1. âœ… GET /health
2. âœ… GET /cabins (×©××•×¨ ××ª cabin_id!)
3. âœ… POST /availability
4. âœ… POST /quote (×”×©×ª××© ×‘-cabin_id ××”×©×œ×‘ 2)
5. âš ï¸ POST /book (×¨×§ ×× ××ª×” ×¨×•×¦×” ×œ×™×¦×•×¨ ×”×–×× ×” ×××™×ª×™×ª)
6. âœ… GET /admin/bookings
7. âœ… GET /admin/audit

---

## ×“×•×’×××•×ª JSON ××•×›× ×•×ª

### POST /availability
```json
{
  "check_in": "2026-02-15 15:00",
  "check_out": "2026-02-17 11:00",
  "adults": 2,
  "kids": null,
  "area": null,
  "features": null
}
```

### POST /quote
```json
{
  "cabin_id": "ZB01",
  "check_in": "2026-02-15 15:00",
  "check_out": "2026-02-17 11:00",
  "adults": 2,
  "kids": null,
  "addons": [
    {"name": "××¡××’' ×œ×—×“×¨", "price": 200},
    {"name": "××¨×•×—×ª ×©×£", "price": 300}
  ]
}
```

### POST /book
```json
{
  "cabin_id": "ZB01",
  "check_in": "2026-02-20 15:00",
  "check_out": "2026-02-22 11:00",
  "customer": "×™×©×¨××œ ×™×©×¨××œ×™",
  "email": "test@example.com",
  "phone": "050-1234567",
  "adults": 2,
  "kids": null,
  "addons": [
    {"name": "××¡××’' ×œ×—×“×¨", "price": 200}
  ]
}
```

---

**ğŸ¯ ×˜×™×¤ ××—×¨×•×Ÿ:** ×ª××™×“ ×”×ª×—×œ ×¢× `GET /cabins` ×›×“×™ ×œ×§×‘×œ ××ª ×”-`cabin_id` ×”× ×›×•×Ÿ!

